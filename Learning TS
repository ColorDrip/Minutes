noimport numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Create date range (5 years of monthly data)
dates = pd.date_range(start='2018-01-01', periods=60, freq='M')

# Generate components
np.random.seed(42)
trend = np.linspace(10, 50, 60)                  # Linear upward trend
seasonality = 10 * np.sin(2 * np.pi * dates.month / 12)  # Yearly seasonality
cycle = 5 * np.sin(2 * np.pi * dates.month / 36)         # Longer cycle
noise = np.random.normal(0, 2, 60)                       # Random noise

# Combine components
values = trend + seasonality + cycle + noise

# Create dataframe
data = pd.DataFrame({'Date': dates, 'Value': values})
data.set_index('Date', inplace=True)

# Plot synthetic data
plt.figure(figsize=(12,5))
sns.lineplot(x=data.index, y=data['Value'])
plt.title("Synthetic Time Series (Trend + Seasonality + Cycle + Noise)")
plt.show()

from statsmodels.tsa.seasonal import seasonal_decompose

# Decompose (period=12 for monthly data)
decomposition = seasonal_decompose(data['Value'], model='additive', period=12)
decomposition.plot()
plt.show()

# Smooth using rolling average (3 months window)
data['Smoothed'] = data['Value'].rolling(window=3).mean()

plt.figure(figsize=(12,5))
plt.plot(data.index, data['Value'], label='Original', alpha=0.5)
plt.plot(data.index, data['Smoothed'], label='Smoothed', color='red')
plt.title("Noise Reduction with Rolling Mean")
plt.legend()
plt.show()

from statsmodels.tsa.stattools import adfuller

def adf_test(series):
    result = adfuller(series.dropna())
    print("ADF Statistic:", result[0])
    print("p-value:", result[1])
    if result[1] <= 0.05:
        print("Data is Stationary")
    else:
        print("Data is NOT Stationary")

adf_test(data['Value'])

# First difference
data['Diff1'] = data['Value'].diff()

adf_test(data['Diff1'])

# Seasonal differencing (12 months)
data['Diff12'] = data['Value'].diff(12)

adf_test(data['Diff12'])