import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from pandas.plotting import scatter_matrix

# 1. Load CSV
df = pd.read_csv("your_file.csv")

# 2. Convert to numeric (drop Date column if present)
if 'Date' in df.columns:
    df = df.drop(columns=['Date'])

df = df.apply(pd.to_numeric, errors='coerce')
df = df.replace([np.inf, -np.inf], np.nan).dropna()

# 3. Scatter matrix (pairwise plots)
plt.figure(figsize=(12, 12))
scatter_matrix(df, figsize=(12, 12), diagonal='kde', alpha=0.7)

# Rotate labels horizontally
plt.xticks(rotation=0)
plt.yticks(rotation=0)
plt.suptitle("Scatter Plot Matrix of All Variables", y=1.02)
plt.show()

# 4. Correlation heatmap
corr_matrix = df.corr()

plt.figure(figsize=(8, 6))
plt.imshow(corr_matrix, cmap='coolwarm', interpolation='nearest')
plt.colorbar(label="Correlation Coefficient")
plt.xticks(range(len(corr_matrix)), corr_matrix.columns, rotation=45)
plt.yticks(range(len(corr_matrix)), corr_matrix.columns)
plt.title("Correlation Heatmap of All Variables")
plt.show()

print("Correlation Matrix:")
print(corr_matrix)